关于数据库优化的一些感想：

- 我们优化数据库的目标是什么，或者我们优化数据库是为了解决什么问题呢？我们总是能讲出一些局部性优化的方法，但是我们有什么提纲挈领的思路呢？我的想法是这样的
- 数据库优化的手段有很多，但是我们不能从手段入手，应该是从问题入手，出现了什么问题，才需要我们去优化数据库？
- 最表面的问题是，我们业务系统卡了，慢了，这些问题的数据库原因是：sql语句执行慢
- sql语句执行慢，为什么会慢？
  - 其根本原因是：数据量越来越大，在海量数据的表中查询数据，效率会越来越低，如果再加上高并发sql执行，整体执行会更慢。
  - 那解决办法也就是随着数据量的增大，有着不同，但是其本质办法是让sql语句执行时，查询的数据量越少越好。
  - 数据量10w以下，不需要优化，不加索引查询基本也不会太慢。
  - 数据量100w以下，sql有没有通过索引缩小查询范围
  - 100w-1000w之间，普通索引也不能将查询缩小到比较小的范围
    - 深入优化索引，优化业务sql让查询效率更高，深入优化提高并发效率，解决死锁问题等
    - 分析读写类型，通过修改数据库引擎优化，如果是读多用mysalm，写多更新多用innodb
    - 分析业务特点，如果热点数据主要集中在最新的数据，可以将旧数据迁移出去，让业务表数据总量保持在一定范围内
  - 1000w以上数据，通过分布式部署，降低单库sql执行并发、通过分表分库，降低单库数据量。
    - 读写分离，使不同操作数据库使用更适合此操作的数据库引擎，提高效率，也有部分降低并发的作用
    - 通过水平拆分-分表分库，降低单库数据量，使单库sql执行效率增高
    - 通过垂直拆分，细化业务类型，根据不同业务需求，适配其他高可用方案，例如添加nosql类型数据库提高读写并发
    - 比如Cobar 管理3000+ 个mysql，平均每天处理请求50亿次，平均到单个节点，每秒请求不到20个
    - 在这个思想指导产生好多分布式高可用方案,例如mycat、mha、mysql Cluster、mysql Fabric等方案

